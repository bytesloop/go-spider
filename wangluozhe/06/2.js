document = { name: 'document' }
window = { name: 'window' }
var TOKEN_SERVER_TIME = 1611313000.34

var n = [
  '.',
  ';',
  Array,
  'L_',
  'bo',
  'oByt',
  'get',
  'Key',
  'os',
  'uV&',
  '!O',
  'ro',
  '2345Ex',
  'we',
  '\u2552\u0973\u095f\u09e3',
  'e',
  '=:',
  'f',
  0,
  '',
  'thsi.cn',
  'all',
  86,
  'l_#\x19\x18\x07g\x15rV8\x15\t\x0ea',
  !0,
  !1,
  "'Vd$;",
  'getCookie',
  1,
  '=',
  'length',
  '; domain=',
  '=htap ;',
  'RegExp',
  '___',
  'body',
  'documentElement',
  'F[)',
  'reffuBot',
  '.c\x1e',
  8,
  'decodeBuffer',
  'e64',
  'ode',
  '2',
  '7',
  '\\S[',
  16,
  'scr',
  'ng',
  'l?+',
  '124f80',
  'readyState',
  '\u255f\u096f\u095f\u09f7',
  '1002',
  '1750',
  'on',
  2,
  'le',
  'i',
  '\x02',
  'timeNow',
  '\u2554\u0975\u0957',
  'wheel',
  'click',
  'BIDUBr',
  document,
  window,
  'tcejbOXevitcA',
  'Weak',
  'Apple Computer, Inc.',
  'yT"\\NR\x0ezZ]3VL',
  '&o&6d',
  'RESWORBBL',
  'chr',
  53,
  'Q',
  '\u2544\u0964\u0949\u09e5\u09b5\u0930\u09a2\u09d0\u099a\u09da\u09b7\u09d0\u09df\u09d8',
  'Ldz]',
  '^MacIntel',
  '_R"wJX!F]E\x10PYC#G]',
  '\u2506\u092d',
  's',
  'or',
  'ej',
  'gm',
  'hY*%_',
  '^https?\\:',
  33,
  'host',
  '\\.?',
  'g',
  'analys',
  'isRst',
  'headers',
  'prototype',
  'CHAM',
  'ADED',
  51
]

var t = [
  '5',
  Object,
  'cot',
  '"^',
  '@s',
  'O7N',
  'getAll',
  'pbE(\x1b',
  Boolean,
  'h',
  'ELEO',
  '&]^',
  71,
  '',
  String,
  2,
  'RegExp',
  document,
  '=',
  ' P',
  '$&',
  '<script>document.w=window</script><iframe src="/favicon.icon"></iframe>',
  'frames',
  79,
  'Init',
  0,
  ',x',
  82,
  '7',
  10,
  '\t\x01',
  '12',
  'W[',
  7,
  'onerror',
  85,
  'ti',
  Date,
  '\u255b\u0978\u0954',
  / /g,
  1,
  'TR8RL_',
  '[@:]',
  'getServerTime',
  'y7',
  '\x17[\x16->',
  '.',
  'ckP',
  !0,
  'isTrusted',
  'R\x1d',
  window,
  'ActiveXObject',
  'vendor',
  'i',
  '\u255e',
  'ch',
  'navigator',
  'length',
  50,
  'savnac',
  'name',
  '1',
  'H\x1e/',
  '\x1e ',
  16,
  'ShockwaveFlash.ShockwaveFlash',
  95,
  '\u2569\u253e\u2557\u2539\u250a\u2538',
  15,
  '21',
  'vent',
  'List',
  'et',
  'Respon',
  ']E$',
  !1,
  '^_self$',
  'KE5pTR;PVC',
  'A',
  '\u2576\u097e\u094e\u09f8\u09a6\u0938\u09b6\u09fe\u0996\u09d7\u09a7\u09d2\u09cc',
  26,
  '\u2569',
  'jsonp_ignore',
  '\u2508'
]

var r = [
  '\u2556\u253f',
  'ume',
  29,
  'lo',
  'yivue',
  '*`or',
  'strT',
  Date,
  'sted',
  'vent',
  'D:jt',
  'ect',
  '_[3',
  'owser',
  'chr',
  'plug',
  'iso',
  'get',
  0,
  'bt39M',
  '\u255f\u253a\u255b\u253f',
  '',
  '; expires=',
  28,
  '[!"#$%&\'()*+,/\\\\:;<=>?@[\\]^`{|}~]',
  'htmlfile',
  8,
  '1100',
  10,
  2,
  'tV',
  'length',
  'encode',
  92,
  '11111010000',
  'readyState',
  document,
  'ire',
  'url',
  'object',
  'href',
  16,
  'gth',
  1,
  '\u251b',
  ':',
  '10',
  'RegExp',
  '\u2569\u0966\u0914\u09bb\u09ad\u0979',
  'i$G$',
  5,
  '^(\\d+\\.)+\\d+$',
  'kal',
  'analysisRst',
  'getOriginFromUrl',
  'addEventListener',
  3,
  'onwheel',
  'getMouseWhell',
  'ome',
  window,
  'head',
  'egasseMtsop',
  'HN"]WY',
  'sgAppName',
  'Maxthon',
  71,
  'UBrowser',
  'i',
  'MSGesture',
  30,
  'J\x1a0',
  'platform',
  '\x16~4x',
  'language',
  '^iPad',
  '^iPod',
  'getBrowserIndex',
  '11',
  '16',
  4,
  'update',
  String,
  'addE',
  '011',
  '\u2519',
  'Z|A',
  ' 00:00:0',
  'seHead',
  '110',
  27,
  'Cl',
  'target',
  'parentNode',
  'unload',
  '&;',
  'locotorp',
  '\u2544\u2536\u2555',
  '\u2507\u093d\u097d\u09dc\u0984',
  '\u2556\u0971\u0956\u09fe\u09a7',
  'headers',
  81,
  'PR7Q]E%',
  77,
  'Y[',
  '&'
]

var e = [
  'er-Message',
  Boolean,
  'e_f',
  'RegExp',
  'Enc',
  'on',
  Array,
  'th',
  'Uint',
  '\x1e~)',
  'Goo',
  'c.',
  'me',
  'l2',
  '-88',
  '0',
  'e',
  '_r',
  'hexin-v',
  'so.thsi.cn',
  20,
  'cookie',
  0,
  1,
  'setCookie',
  'localStorage',
  'head',
  !1,
  'le',
  'prototype',
  'f',
  '\u2506\u092c\u090b\u09a0\u09e1\u096c\u09df\u0980',
  '10010',
  '',
  '#\x1aA}t',
  'readyState',
  'onload',
  96,
  'null',
  'status_code',
  10,
  'undefined',
  'length',
  'Ogd[',
  2,
  '\u2550\u0978\u094e\u09d9\u09bf\u092e\u099a\u09f7\u0986\u09d2\u09af\u09e4\u09ca\u09d1',
  'onmousewheel',
  document,
  'getMouseMove',
  'getMouseClick',
  '^Linux ',
  "8*'",
  '\u2554\u2535\u2559\u2535\u2565\u250d\u256c\u2502\u2576\u2519\u2574',
  'tingsE',
  '\x16Gb',
  '\u2560\u0978\u095b\u09fa\u099d\u093c\u099e',
  'vitcA',
  'MY5',
  window,
  'k:',
  'opr',
  'W(Nv',
  'plorer',
  'aef',
  'revirdbew',
  '\\X\x18ZLc$T[\\',
  'xK}',
  'TR8RL_',
  'ontouchstart',
  'dy',
  Date,
  'ActiveXObject',
  'Shockwave',
  '\u2569\u095c\u0968\u09dc',
  'getPluginNum',
  7,
  8,
  9,
  'ers',
  'f\x1fx\x1f\x07\x1eln\x18k"h\x12\x1f\rkdE\n[e\x1d\x7fiJ\br',
  'error',
  'LV',
  !0,
  'click',
  'tagName',
  'emantsoh',
  'insertBefore',
  '\\y$g"',
  'w',
  '\\?',
  encodeURIComponent,
  'Init'
]

var a = [
  'X-Antispid',
  'du',
  ' ',
  String,
  '___',
  'duc',
  'ile',
  '1',
  'Ez@"',
  '"rQ@X',
  '\u2554\u2520\u257f',
  2,
  '\u2552\u2521',
  47,
  'tou',
  '\u2559',
  'Cli',
  'MozSet',
  'eXObj',
  'b',
  'ELEO',
  9527,
  256,
  'RegExp',
  document,
  0,
  ';',
  !0,
  33,
  'delCookie',
  window,
  74,
  '\\X5@UR8A',
  '\u2550',
  'addBehavior',
  '&d?\x1ep',
  'set',
  '#default#userData',
  'del',
  'ng',
  'ZV%',
  'ds',
  'base_fileds',
  71,
  8,
  '25',
  78,
  'bas',
  6,
  '20',
  '_-9876543210zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA',
  '3f',
  16,
  '',
  'V587',
  2333,
  'event',
  'pro',
  '\x1c0i]',
  'src',
  '//s.thsi.cn/js/chameleon/time.1',
  1,
  'WY:ZYS',
  'onreadystatechange',
  '1111101001',
  'location',
  'i',
  '3',
  Date,
  '\x16\x1d',
  'length',
  '\u2569\u0941\u0949\u09bb\u09f8\u0962\u09d4\u09d9\u0980\u09c9\u09b2\u09c2\u0987\u0987\u099f\u0a2e\u0a40\u09f2\u09b1\u0963\u090c\u09e0\u09d6\u09aa\u099a\u0921\u097d\u092d\u0a37\u09a1\u09e5\u090d\u09b0\u09c0\u0971\u0a38',
  'booleanToDecimal',
  '\u2550\u2535\u2541',
  'DOMMouseScroll',
  '\u255a\u2535\u2540\u2533\u2556\u253b\u2554\u2522\u2547',
  'isTru',
  'clientY',
  'ro',
  '[ix]\\d+',
  'maxHeight',
  'ActiveXObject',
  'ay',
  'vendor',
  'QQBrowser',
  '0`L',
  12,
  !1,
  'th',
  'plugins',
  'PDF|Acrobat',
  'localStorage',
  'Native Client',
  'TV8RMV1PK',
  '10000',
  '^Win64',
  '^Linux armv|Android',
  'getPlatform',
  36,
  '\b',
  5,
  10,
  '16',
  '10',
  3,
  'Init',
  'h',
  35,
  'tar',
  'Gg',
  44,
  84,
  '\\',
  ')`7\x1e',
  '11',
  '\u2564\u2527\u2575\u253c\u256c\u2538',
  '\u2544\u2536\u2555',
  'appendChild',
  '_str',
  'C[Q\x1f',
  98,
  '=',
  'CHAM'
]

var u = [
  '.b',
  73,
  Array,
  '2',
  '0',
  '3',
  'red',
  Error,
  '\u2576\u2512\u2576\u2504',
  'RegExp',
  'Bind',
  'Dow',
  '\u250f\u095c\u0948\u09e3',
  '\u2544',
  'aw',
  'v',
  'head',
  'allow',
  '\u2507\u093d\u090a\u09a1\u09ea\u096d\u09de\u098b\u09c4\u098d\u09e2\u09f6\u09f5\u09e9',
  0,
  '\\^ ',
  window,
  1,
  'length',
  '\u2505\u2530\u2505',
  49,
  'base_fileds',
  '\u2504\u092a',
  8,
  'error',
  '\u2506\u092d\u090a\u09a1\u09e0\u096d\u09df\u0980',
  5,
  '10',
  'base64Decode',
  '\x16C',
  'edoced',
  'dy',
  '^"',
  'isIP',
  16,
  '.js',
  'loaded',
  13,
  'WY$PYS/FLV"P[_7[_R',
  '^\\s*(?:(https?:))?\\/{2,}([^\\/\\?\\#\\\\]+)',
  '8',
  '',
  '@',
  'parse',
  'JV8QWZ',
  'serverTimeNow',
  'mousewheel',
  document,
  'ch',
  'em',
  'le',
  'safari',
  'U`N',
  'ActiveXObject',
  ' In',
  'i',
  '\u2554\u0975\u0948\u09fe\u09bd\u0938',
  'chrome',
  'bg',
  'defaultCharset',
  '1e0',
  'zh-cn',
  '}Y6n',
  '^BlackBerry',
  '110',
  10,
  '010',
  'V\x17^',
  'th',
  'open',
  'a',
  'rg',
  'submit',
  'XMLHTTP',
  '#',
  36,
  2,
  'M]J',
  '/s',
  'ng',
  'Window',
  'N_LO'
]

var c = [
  'tpi',
  '=sB4',
  '.*',
  'd',
  'ove',
  'r',
  Boolean,
  'vh\x1az',
  'ADED',
  !0,
  'CHAMELEON_CALLBACK',
  3,
  2333,
  's.thsi.cn',
  'ow',
  'checkcookie',
  'Init',
  'length',
  '=',
  'Nq',
  document,
  'cookie',
  'nt',
  'RegExp',
  '^d',
  'documentElement',
  0,
  48,
  10,
  '8ixl',
  2,
  8,
  5,
  1,
  'yivue',
  Date,
  'complete',
  'interactive',
  'ca',
  '\u2506\u092c\u090b\u09a0\u09e1\u096d\u09df\u0981\u09c4\u098d',
  'redirect_url',
  '\u2552',
  49,
  '\u250d',
  'W\x15G\x168',
  '\u2506\u092c\u090b\u09a0\u09e1\u096c\u09df\u0980\u09c5\u098c\u09f3\u0980\u0989\u098c\u0987\u0a20\u0a2d\u09ec\u09fb\u0960\u0911\u09ac\u09cf\u09c0\u09f5\u094c\u0963\u0940\u0a39\u09cc\u09f7\u0960',
  'strhash',
  'getRootDomain',
  '\\.com\\.cn$|\\.com\\.hk$',
  45,
  '.',
  'v',
  44,
  'keydown',
  'clientX',
  'ins',
  window,
  'u!',
  'chrome',
  '\x1f=',
  'ome',
  'TheWorld',
  '\u2554\u0975\u0948\u09fe\u09bd\u0938',
  30,
  'UD\x12ZvX"aJV5^',
  'plugins',
  ':0A8h',
  !1,
  '\u2502\u0924\u0917',
  93,
  '\u2569\u095c\u0954\u09f5\u09a2\u0932\u0987\u09d5',
  '^iPhone',
  '13',
  '3c',
  'Fri, 01 ',
  'Feb 2050',
  'a',
  'i',
  '#',
  20,
  'error',
  '\\.',
  '$',
  'apply',
  69,
  '/',
  '\u256f\u2522\u256e\u2526\u2552\u2526\u2556\u2504\u2561\u2510\u2565\u2500\u2573\u2507',
  'fetch',
  'headers',
  71,
  '0000021'
]

// 读取 js 文件
var fs = require('fs')
var jsStr = fs.readFileSync('1.js', 'utf-8')
// 正则查找
var nRe = /n\[(\d{1,3})\]/g
var nArray = [...jsStr.matchAll(nRe)]
var tRe = /t\[(\d{1,3})\]/g
var tArray = [...jsStr.matchAll(tRe)]
var rRe = /r\[(\d{1,3})\]/g
var rArray = [...jsStr.matchAll(rRe)]
var eRe = /e\[(\d{1,3})\]/g
var eArray = [...jsStr.matchAll(eRe)]
var aRe = /a\[(\d{1,3})\]/g
var aArray = [...jsStr.matchAll(aRe)]
var uRe = /u\[(\d{1,3})\]/g
var uArray = [...jsStr.matchAll(uRe)]
var cRe = /c\[(\d{1,3})\]/g
var cArray = [...jsStr.matchAll(cRe)]
console.log(
  nArray.length,
  tArray.length,
  rArray.length,
  eArray.length,
  aArray.length,
  uArray.length,
  cArray.length
)
console.log(jsStr.length)

function getName(value) {
  let rStr
  switch (typeof value) {
    case 'string':
      quote = value.indexOf('"') != -1 ? "'" : '"'
      rStr = quote + value + quote
      break
    case 'function':
      rStr = value.name
      break
    case 'object':
      rStr = value.name
      break
    default:
      rStr = value + ''
  }
  return rStr
}
// 数组替换
for (let value of nArray) {
  //console.log(value[0], n[value[1]])
  jsStr = jsStr.replace(value[0], getName(n[value[1]]))
}
for (let value of tArray) {
  jsStr = jsStr.replace(value[0], getName(t[value[1]]))
}
for (let value of rArray) {
  jsStr = jsStr.replace(value[0], getName(r[value[1]]))
}
console.log(jsStr.length)
for (let value of eArray) {
  jsStr = jsStr.replace(value[0], getName(e[value[1]]))
}
for (let value of aArray) {
  jsStr = jsStr.replace(value[0], getName(a[value[1]]))
}
for (let value of uArray) {
  jsStr = jsStr.replace(value[0], getName(u[value[1]]))
}
for (let value of cArray) {
  jsStr = jsStr.replace(value[0], getName(c[value[1]]))
}
console.log(jsStr.length)
// console.log(jsStr)
// 写入文件
fs.writeFile('3.js', jsStr, { flag: 'w+' }, err => {})
